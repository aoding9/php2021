##  数据类型

php是弱类型语言，变量本身没有数据类型

### 4.1 8种数据类型

3大类8小类

- 简单数据类型：4小类
  - 整形(int/integer)
    - 根据系统环境不同，一般是4个字节或者8字节，二进制码第一位表示正负号，超出范围的整数会自动转成浮点数
  - 浮点型(float/double) 
    -  8字节或16字节 表示小数或者整形存不下的整数，二进制码第一位是正负号，跟着7位表示乘以10的几次幂，后面位数为科学计数法的因数，两者的乘积就是浮点数据的值。因数是由原数值不断除以2得到的，有精度限制，当出现因数位数过长，或者除不尽的时候，位数超过了精度，多出的尾部会被省略掉，导致结果可能不准确。
  - 字符串型(string)
    - 系统根据实际长度分配，存放字符组成的字符串
  - 布尔型(bool/boolean)
    - 布尔值，真和假：true和false

- 复杂数据类型：2小类
  - 对象类型： object
    - 面向对象
  - 数组类型： array
    - 存储多个数据

- 特殊数据类型：2小类
  - 资源类型(resource)
    - 存放资源数据，如数据库、文件等
  - 空类型(NULL)
    - NULL类型的值就是NULL，不可以运算



### 4.2 类型转换

将数据的类型转成另一种

- 两种转换方式
  - 自动转换（系统自动判断的）
  - 强制转换（手动，效率高）



- 其他类型转数值
  - 布尔true为1，false为0
  - 字符串以字母开头的永远为0，以数字开头的，取碰到字符串为止

![image-20201210144434902](.\img\image-20201210144434902.png)

```php
<?php
$a = 'abc11';
$b = '1.1.1abc';

// 自动类型转换
// 布尔值true自动转为1
echo true + 1;

// 手动类型转换
// php7为了提高性能，移除了一部分自动类型转换，现在这么加不会自动转了
// echo $a + $b;
// 变量前面加括号，里面写要转换的类型
echo (float)$a + (float)$b, '<br>';
echo intval($a) + intval($b), '<br>';
// 结果为1.1和1，$a转成0,$b转成了1以及1.1


// 判断数据类型
// 布尔类型不能用echo查看，可以用var_dump输出类型和值
// is_datatype 可以判断是否为某个类型，结果为布尔值
var_dump(is_int($a));
var_dump(is_string($b));
// gettype获取变量的类型
echo gettype($a), '<br>';
// settype设置变量的类型，如果设置成功会返回true
var_dump(settype($b, 'int'));
echo '<br>', gettype($b), $b;

// 强制转换和settype的区别
// 强制转换是对数据复制后转换，不影响原来的数据，settype是直接对原数据转换
```

### 4.3 数据类型更多介绍

#### 整数类型

```php
// php有四种整形进制定义
// 十进制
$a1 = 110;
// 二进制 0b开头
$a2 = 0b110;
// 八进制 0开头
$a3 = 0110;
// 十六进制 0x开头
$a4 = 0x110;
echo $a1 . '<br>' . $a2 . '<br>' . $a3 . '<br>' . $a4 . '<br>';
// echo自动输出十进制整数
```

![image-20201210160041925](.\img\image-20201210160041925.png)

#### 浮点类型

```php
// 浮点型
// 二进制码第一位是正负号，紧跟的7位是科学计数法的中10的指数，后面的是因数，二者乘积就是存储的数值

$f1 = 1.23;
$f2 = 1.23e10;
// 由于因数为不断除以2得到，位数超过精度时舍弃尾部，所以结果可能不准确
$f4 = 2.1;
$f5 = 0.7;
var_dump($f4 / 3 === $f5);
// 当整形超过存储的范围后会用浮点型存储
$f3 = PHP_INT_MAX;
echo gettype($f3), '<br>';
$f3 += 1;
var_dump($f1, $f2, $f3);
```



#### 布尔类型

```php
// 布尔类型
// 真、假   true false
// 其他类型转布尔类型时，有些地方需要注意
// empty() 判断数据的值是否为“空”，不是NULL，为“空”返回true，否则false，空字符串空数组都是true
// isset() 检测变量是否已设置并且非 NULL，存在变量返回true，否则false

/*            empty()    isset()
$x;           true       false
$x=null;      true       false
$x=undefined  true       false
上面三个isset为false，其他一般为true

$x=0;         true
$x="0";       true
$x=false;     true
$x="false";   false
布尔值false为empty为true，但是字符串“false”为false
数字0和字符串0都为true


*/

// 具体的看php手册
```



![image-20201210173317421](.\img\image-20201210173317421.png)

